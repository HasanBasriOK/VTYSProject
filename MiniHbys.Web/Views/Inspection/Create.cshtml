@using MiniHbys.Entity
@model MiniHbys.Entity.Inspection

@{
    ViewBag.Title = "Create Inspection";
    Layout = "_Layout";

    var doctors = (List<Doctor>)ViewBag.Doctors;
    var patients = (List<Patient>)ViewBag.Patients;

    var doctorsSelectListItems = new List<SelectListItem>();
    var patientsSelectListItems = new List<SelectListItem>();

    foreach (var doctor in doctors)
    {
        doctorsSelectListItems.Add(new SelectListItem(text: doctor.DoctorName+" "+doctor.DoctorSurname, value: doctor.DoctorID
        .ToString
        ())); 
    }

    foreach (var patient in patients)
    {
        doctorsSelectListItems.Add(new SelectListItem(text: patient.PatientName+ " " + patient.PatientSurname, value: patient.PatientID
        .ToString())); 
    }
}

@using (Html.BeginForm(actionName: "Create", controllerName: "Inspection", routeValues: null, method: FormMethod.Post))
{
    <div style="padding: 20px">
        <div class="form-group">
            @Html.DropDownListFor(x => x.DoctorID, doctorsSelectListItems, htmlAttributes: new { @class = "form-control", placeholder = 
            "Doctor" })
        </div>
        <div class="form-group">
            @Html.DropDownListFor(x => x.PatientID, patientsSelectListItems, htmlAttributes: new { @class = "form-control",
             placeholder = "Patient" })
        </div>
        <div class="form-group">
            @Html.TextBoxFor(x => x.InspectionDate, htmlAttributes: new { @class = "form-control", placeholder = "Inspection Date" })
        </div>
        <div class="form-group">
            @Html.TextBoxFor(x => x.InspectionResult, htmlAttributes: new { @class = "form-control", placeholder = "Inspection Result" })
        </div>
        <div style="float: right">
            <button type="submit" class="btn btn-success">Save</button>
        </div>
    </div>
}